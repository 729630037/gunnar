<!-- Run drivers to publish sensor data and respond to actuation requests. -->
<launch>

    <!--Driver which publishes sensor data and responds to commands about motors and other devices.-->
    <node name="hardwareDriver_sh" pkg="gunnar" type="hardwareDriver.sh" />
    <node name="twistToMotors" pkg="gunnar" type="twistToMotors">
    <!--   <remap from="/cmd_vel" to="/smooth_cmd_vel" /> -->
    </node>
    
    <!-- odometry parameters -->
    <param name="lidarAngle" value="3.14159" />
    <!-- np.mean((45273., 44593.)) / (106.5 * 2.54 / 100.) -->
    <param name="RIGHT_CLICKS_PER_M" value="16610.476507337993" />
    <param name="LEFT_CLICKS_PER_M" value="16610.476507337993" />
    <!-- np.mean((41785.-29843., 58898.-37678.)) / ticksPerMMeas2 * 2. / (np.pi * 2) -->
    <param name="WHEEL_BASE_M" value="0.31774502197344084" />
    
    <!--Driver which publishes lidar scans.-->
    <node pkg="gunnar" name="lidarDriver" type="lidarDriver"></node>
      
    <!--Establish static TF transforms-->
    <node pkg="tf" type="static_transform_publisher" name="odom_rotation" args="0 0 0 -1.5698 0 0 odom odom_rot 100" />
    
    <!--Gmapping-->
    <node pkg="gmapping" name="slam_gmapping" type="slam_gmapping">
        <param name="temporalUpdate" value="0.1" />
        <!-- <param name="linearUpdate" value="0.1" /> -->
        <param name="particles" value="24" />
        <param name="iterations" value="8" />
        
        <!-- Minimum score for considering the outcome of the scan matching good.
        Can avoid jumping pose estimates in large open spaces when using laser
        scanners with limited range (e.g. 5m). Scores go up to 600+,
        try 50 for example when experiencing jumping estimate issues.--> 
        <param name="minimumScore" value="50" />
        
        <!-- Let's say our odometry is pretty crappy. -->
        <param name="srr" value=".2" />
        <param name="srt" value=".4" />
        <param name="str" value=".2" />
        <param name="stt" value=".4" />
        
        <!-- Don't look at all the beams in the scan. -->
        <param name="lskip" value="0" />
        
        <!-- Don't look at all scans. -->
        <param name="throttle_scans" value="1" />
        
        <param name="maxUrange" value="6" />
        <param name="maxRange" value="4" />
        
        <param name="map_update_interval" value=".5" />
        
        <!-- Resolution of the map (default 0.05)-->
        <param name="delta" value="0.05" />
        
    </node>

</launch>
